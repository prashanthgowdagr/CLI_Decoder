/* ══════════════════════════════════════════════════════════════════
   CLIDecoder — Styles
   Dark/light theme · Explainshell-inspired token bar + cards
   ══════════════════════════════════════════════════════════════════ */

/* ── Token Colour Palette ────────────────────────────────────────── */
:root {
  --clr-cmd:   #f97316; --clr-sub:  #a78bfa; --clr-flag: #34d399;
  --clr-arg:   #60a5fa; --clr-val:  #fbbf24; --clr-pipe: #f472b6;
  --clr-other: #94a3b8;
  --radius: 10px;
  --transition: 0.25s cubic-bezier(.4,0,.2,1);
}

/* ── Dark Theme ──────────────────────────────────────────────────── */
[data-theme="dark"] {
  --bg:#0d0f14; --surface:#161922; --surface2:#1e2230; --border:#2a2f3d;
  --text:#e2e8f0; --text-muted:#64748b; --glow:rgba(99,102,241,.25);
  --input-bg:#0a0c10; --card-shadow:rgba(0,0,0,.35);
}

/* ── Light Theme ─────────────────────────────────────────────────── */
[data-theme="light"] {
  --bg:#f4f6fb; --surface:#ffffff; --surface2:#eef1f8; --border:#d1d8e8;
  --text:#1e2330; --text-muted:#6b7a99; --glow:rgba(99,102,241,.12);
  --input-bg:#f9fafc; --card-shadow:rgba(0,0,0,.08);
  --clr-cmd:#d6450a; --clr-sub:#7c3aed; --clr-flag:#059669;
  --clr-arg:#2563eb; --clr-val:#b45309; --clr-pipe:#be185d; --clr-other:#475569;
}

/* ── Reset ───────────────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body {
  font-family: 'Syne', sans-serif;
  background: var(--bg); color: var(--text);
  min-height: 100vh;
  transition: background var(--transition), color var(--transition);
  overflow-x: hidden;
}

/* ── Grid Background ─────────────────────────────────────────────── */
body::before {
  content: ''; position: fixed; inset: 0;
  background-image:
    linear-gradient(rgba(99,102,241,.04) 1px, transparent 1px),
    linear-gradient(90deg, rgba(99,102,241,.04) 1px, transparent 1px);
  background-size: 40px 40px;
  pointer-events: none; z-index: 0;
}

/* ── Layout ──────────────────────────────────────────────────────── */
.page { position: relative; z-index: 1; max-width: 960px; margin: 0 auto; padding: 28px 20px 80px; }

/* ── Header ──────────────────────────────────────────────────────── */
header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 40px; }
.logo { display: flex; align-items: center; gap: 10px; }
.logo-icon {
  width: 38px; height: 38px;
  background: linear-gradient(135deg, #6366f1, #a78bfa);
  border-radius: 10px; display: grid; place-items: center;
  font-family: 'JetBrains Mono', monospace;
  font-size: 15px; font-weight: 700; color: #fff;
  box-shadow: 0 0 20px var(--glow); user-select: none;
}
.logo-text { font-size: 20px; font-weight: 800; letter-spacing: -.5px; }
.logo-text span { color: #6366f1; }

.no-api-badge {
  font-family: 'JetBrains Mono', monospace;
  font-size: 10px; font-weight: 700;
  padding: 4px 10px; border-radius: 99px;
  background: rgba(52,211,153,.12);
  border: 1px solid rgba(52,211,153,.3);
  color: #34d399; letter-spacing: .5px;
}

.theme-btn {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 40px; padding: 6px 14px;
  display: flex; align-items: center; gap: 7px;
  cursor: pointer; font-family: 'Syne', sans-serif;
  font-size: 13px; font-weight: 600; color: var(--text-muted);
  transition: all var(--transition);
}
.theme-btn:hover { color: var(--text); border-color: #6366f1; box-shadow: 0 0 12px var(--glow); }
.theme-btn svg { width: 15px; height: 15px; }

/* ── Hero ────────────────────────────────────────────────────────── */
.hero { text-align: center; margin-bottom: 36px; }
.hero h1 {
  font-size: clamp(26px,5vw,42px); font-weight: 800;
  letter-spacing: -1px; line-height: 1.15; margin-bottom: 10px;
}
.hero h1 em { font-style: normal; color: #6366f1; }
.hero p { color: var(--text-muted); font-size: 15px; max-width: 540px; margin: 0 auto; }

/* ── Platform Chips ──────────────────────────────────────────────── */
.platforms { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; margin-bottom: 28px; }
.chip {
  font-family: 'JetBrains Mono', monospace; font-size: 11px; font-weight: 500;
  padding: 5px 12px; border-radius: 99px;
  border: 1px solid var(--border); background: var(--surface);
  color: var(--text-muted); cursor: pointer;
  transition: all var(--transition); user-select: none;
}
.chip:hover, .chip.active {
  border-color: #6366f1; color: #818cf8;
  background: rgba(99,102,241,.08); box-shadow: 0 0 10px var(--glow);
}

/* ── Input Card ──────────────────────────────────────────────────── */
.input-card {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 14px; padding: 20px; margin-bottom: 24px;
  box-shadow: 0 4px 24px rgba(0,0,0,.12);
  transition: border-color var(--transition);
}
.input-card:focus-within {
  border-color: #6366f1;
  box-shadow: 0 0 0 3px var(--glow), 0 4px 24px rgba(0,0,0,.12);
}

.input-label {
  font-size: 11px; font-weight: 700; letter-spacing: 1.2px;
  text-transform: uppercase; color: var(--text-muted);
  margin-bottom: 10px; font-family: 'JetBrains Mono', monospace;
}

.input-row { display: flex; gap: 10px; }
.cmd-input {
  flex: 1; background: var(--input-bg);
  border: 1px solid var(--border); border-radius: 8px;
  padding: 12px 16px;
  font-family: 'JetBrains Mono', monospace; font-size: 14px;
  color: var(--text); outline: none;
  transition: all var(--transition);
}
.cmd-input::placeholder { color: var(--text-muted); opacity: .6; }
.cmd-input:focus { border-color: #6366f1; }

.char-counter {
  font-family: 'JetBrains Mono', monospace;
  font-size: 10px; color: var(--text-muted);
  text-align: right; margin-top: 6px; opacity: .7;
}
.char-counter.warn  { color: #f97316; }
.char-counter.limit { color: #ef4444; }

.explain-btn {
  background: linear-gradient(135deg, #6366f1, #818cf8);
  color: #fff; border: none; border-radius: 8px;
  padding: 12px 22px;
  font-family: 'Syne', sans-serif; font-size: 14px; font-weight: 700;
  cursor: pointer; display: flex; align-items: center; gap: 7px;
  transition: all var(--transition); white-space: nowrap; align-self: flex-start;
}
.explain-btn:hover { transform: translateY(-1px); box-shadow: 0 6px 20px rgba(99,102,241,.4); }
.explain-btn svg { width: 15px; height: 15px; }

/* ── Examples ────────────────────────────────────────────────────── */
.examples-label {
  font-size: 11px; font-weight: 700; letter-spacing: 1.2px;
  text-transform: uppercase; color: var(--text-muted);
  margin-bottom: 10px; font-family: 'JetBrains Mono', monospace;
}
.examples-row { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 32px; }
.example-pill {
  font-family: 'JetBrains Mono', monospace; font-size: 11.5px;
  padding: 6px 12px; border-radius: 6px;
  background: var(--surface); border: 1px solid var(--border);
  color: var(--text-muted); cursor: pointer;
  transition: all var(--transition); white-space: nowrap;
}
.example-pill:hover { color: var(--text); border-color: #6366f1; background: rgba(99,102,241,.06); }

/* ── Error ───────────────────────────────────────────────────────── */
.error-msg {
  background: rgba(239,68,68,.08); border: 1px solid rgba(239,68,68,.25);
  border-radius: 10px; padding: 14px 18px; font-size: 14px;
  color: #f87171; font-family: 'JetBrains Mono', monospace; display: none;
}
.error-msg.visible { display: block; }

/* ── Results Container ───────────────────────────────────────────── */
#results { animation: fadeUp .4s ease both; }
@keyframes fadeUp { from { opacity:0; transform:translateY(12px); } to { opacity:1; transform:none; } }

/* ── Summary Bar ─────────────────────────────────────────────────── */
.summary-bar {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 14px; padding: 16px 20px; margin-bottom: 20px;
  font-size: 14px; line-height: 1.6; color: var(--text-muted);
}
.summary-bar strong { color: var(--text); font-weight: 600; }

.coverage-badge {
  display: inline-block; font-family: 'JetBrains Mono', monospace;
  font-size: 10px; font-weight: 700; padding: 2px 8px; border-radius: 99px;
  margin-left: 8px; vertical-align: middle;
}
.coverage-full  { background: rgba(52,211,153,.15); border: 1px solid rgba(52,211,153,.3); color: #34d399; }
.coverage-part  { background: rgba(251,191,36,.12);  border: 1px solid rgba(251,191,36,.3);  color: #fbbf24; }
.coverage-none  { background: rgba(148,163,184,.1);  border: 1px solid rgba(148,163,184,.2); color: #94a3b8; }

/* ── Unknown Notice ──────────────────────────────────────────────── */
.unknown-notice {
  background: rgba(99,102,241,.06); border: 1px dashed rgba(99,102,241,.25);
  border-radius: 10px; padding: 12px 16px; font-size: 13px;
  color: var(--text-muted); margin-bottom: 20px; line-height: 1.6;
}

/* ══════════════════════════════════════════════════════════════════
   EXPLAINSHELL TOKEN BAR
   ══════════════════════════════════════════════════════════════════ */
.token-bar {
  background: var(--input-bg);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 24px 28px 18px;
  margin-bottom: 24px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 15px;
  line-height: 1;
  overflow-x: auto;
  white-space: nowrap;
  display: flex;
  align-items: flex-start;
  gap: 0;
}

.tok-prompt {
  color: var(--text-muted); opacity: .5;
  user-select: none; flex-shrink: 0;
  padding-top: 2px;
}

.tok-space {
  width: 0.5ch; flex-shrink: 0;
}

.tok-col {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  flex-shrink: 0;
  transition: transform .15s ease;
  position: relative;
}

.tok-col:hover, .tok-col.tok-highlight {
  transform: translateY(-2px);
}

.tok-text {
  padding: 2px 4px;
  border-radius: 3px;
  transition: background .15s;
}

.tok-col:hover .tok-text,
.tok-col.tok-highlight .tok-text {
  background: rgba(255,255,255,.08);
}
[data-theme="light"] .tok-col:hover .tok-text,
[data-theme="light"] .tok-col.tok-highlight .tok-text {
  background: rgba(0,0,0,.06);
}

/* ── Coloured underline below each token ─────────────────────────── */
.tok-underline {
  display: block;
  height: 3px;
  width: 100%;
  border-radius: 2px;
  margin-top: 6px;
  transition: height .15s, box-shadow .15s;
}

.tok-col:hover .tok-underline,
.tok-col.tok-highlight .tok-underline {
  height: 4px;
  box-shadow: 0 2px 8px currentColor;
}

/* ── Per-type colours ────────────────────────────────────────────── */
.tok-type-cmd  .tok-text { color: var(--clr-cmd);  }
.tok-type-sub  .tok-text { color: var(--clr-sub);  }
.tok-type-flag .tok-text { color: var(--clr-flag); }
.tok-type-arg  .tok-text { color: var(--clr-arg);  }
.tok-type-val  .tok-text { color: var(--clr-val);  }
.tok-type-pipe .tok-text { color: var(--clr-pipe); }
.tok-type-other .tok-text{ color: var(--clr-other);}

.tok-type-cmd  .tok-underline { background: var(--clr-cmd);  color: var(--clr-cmd);  }
.tok-type-sub  .tok-underline { background: var(--clr-sub);  color: var(--clr-sub);  }
.tok-type-flag .tok-underline { background: var(--clr-flag); color: var(--clr-flag); }
.tok-type-arg  .tok-underline { background: var(--clr-arg);  color: var(--clr-arg);  }
.tok-type-val  .tok-underline { background: var(--clr-val);  color: var(--clr-val);  }
.tok-type-pipe .tok-underline { background: var(--clr-pipe); color: var(--clr-pipe); }
.tok-type-other .tok-underline{ background: var(--clr-other);color: var(--clr-other);}

/* ── Legend ───────────────────────────────────────────────────────── */
.legend { display: flex; flex-wrap: wrap; gap: 14px; margin-bottom: 24px; font-family: 'JetBrains Mono', monospace; font-size: 11px; }
.legend-item { display: flex; align-items: center; gap: 5px; color: var(--text-muted); }
.legend-dot  { width: 9px; height: 9px; border-radius: 50%; flex-shrink: 0; }

/* ══════════════════════════════════════════════════════════════════
   DESCRIPTION CARDS
   ══════════════════════════════════════════════════════════════════ */
.card-area {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 14px;
}

.desc-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 14px 16px;
  border-left: 4px solid transparent;
  transition: border-color var(--transition), transform var(--transition), box-shadow var(--transition);
  animation: fadeUp .4s ease both;
  cursor: default;
}

.desc-card:hover, .desc-card.desc-highlight {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px var(--card-shadow);
}

/* ── Per-type left border ────────────────────────────────────────── */
.desc-type-cmd  { border-left-color: var(--clr-cmd);  }
.desc-type-sub  { border-left-color: var(--clr-sub);  }
.desc-type-flag { border-left-color: var(--clr-flag); }
.desc-type-arg  { border-left-color: var(--clr-arg);  }
.desc-type-val  { border-left-color: var(--clr-val);  }
.desc-type-pipe { border-left-color: var(--clr-pipe); }
.desc-type-other{ border-left-color: var(--clr-other);}

.desc-card:hover, .desc-card.desc-highlight {
  border-color: transparent;
}
.desc-type-cmd:hover,  .desc-type-cmd.desc-highlight  { border-left-color: var(--clr-cmd);  border-color: var(--clr-cmd);  }
.desc-type-sub:hover,  .desc-type-sub.desc-highlight  { border-left-color: var(--clr-sub);  border-color: var(--clr-sub);  }
.desc-type-flag:hover, .desc-type-flag.desc-highlight { border-left-color: var(--clr-flag); border-color: var(--clr-flag); }
.desc-type-arg:hover,  .desc-type-arg.desc-highlight  { border-left-color: var(--clr-arg);  border-color: var(--clr-arg);  }
.desc-type-val:hover,  .desc-type-val.desc-highlight  { border-left-color: var(--clr-val);  border-color: var(--clr-val);  }
.desc-type-pipe:hover, .desc-type-pipe.desc-highlight { border-left-color: var(--clr-pipe); border-color: var(--clr-pipe); }
.desc-type-other:hover,.desc-type-other.desc-highlight{ border-left-color: var(--clr-other);border-color: var(--clr-other);}

.desc-card-header {
  display: flex; align-items: center; gap: 10px; margin-bottom: 8px;
}

.desc-token {
  font-family: 'JetBrains Mono', monospace;
  font-size: 13px; font-weight: 700;
  padding: 2px 8px; border-radius: 5px;
  background: var(--surface2);
}

.desc-badge {
  font-family: 'JetBrains Mono', monospace;
  font-size: 9px; font-weight: 700; letter-spacing: .8px;
  text-transform: uppercase;
  padding: 2px 8px; border-radius: 99px;
  background: var(--surface2);
}

.desc-badge-cmd  { color: var(--clr-cmd);  }
.desc-badge-sub  { color: var(--clr-sub);  }
.desc-badge-flag { color: var(--clr-flag); }
.desc-badge-arg  { color: var(--clr-arg);  }
.desc-badge-val  { color: var(--clr-val);  }
.desc-badge-pipe { color: var(--clr-pipe); }
.desc-badge-other{ color: var(--clr-other);}

.desc-text {
  font-size: 13px; line-height: 1.5;
  color: var(--text-muted);
}

/* ── Footer ──────────────────────────────────────────────────────── */
footer {
  text-align: center; padding-top: 40px;
  font-size: 12px; color: var(--text-muted);
  font-family: 'JetBrains Mono', monospace; opacity: .6;
}

/* ── Responsive ──────────────────────────────────────────────────── */
@media (max-width: 600px) {
  .card-area { grid-template-columns: 1fr; }
  .input-row { flex-direction: column; }
  .explain-btn { align-self: stretch; justify-content: center; }
  .token-bar { padding: 16px 14px 12px; font-size: 13px; }
}
